{% extends 'layout.html' %}

{% block title %}
    Bookkeeper
{% endblock %}


{% block main %}
    <div class='container'>
        <table class='sortable'>
            <thead>
            <tr>
                <th class='transaction-date' data-sort='date'></th>
                <th class='transaction-amount' data-sort='amount'></th>
                <th data-sort='name'></th>
                <th data-sort='name'></th>
                <th class='include-in-budget'></th>
            </tr>
            </thead>
            <tbody>
            <tr>Pending Transactions</tr>
            {% for transaction in transactions %}
                {% if transaction['amount'] > 0 and transaction['category_id'] != '16000000' and transaction['pending'] == 1 %}
                    <tr>
                        <td class='transaction-date'>{{ transaction['date'] }}</td>
                        <td class='transaction-amount'>${{ transaction['amount'] }}</td>
                        <td class='description-edit-icon'
                            id='{{ transaction['transaction_id'] }}'>{{ transaction['name'] }}
                            <!-- <i class='fas fa-edit' id='edit-icon'></i> -->
                            <span class='icon-link'></span>
                        </td>
                        <td class='description-edit'>
                            <label for='{{ transaction['transaction_id'] }}' id='description-edit-label'>Edit
                                Description</label>
                            <input type='text' class='description-edit-input' id='{{ transaction['transaction_id'] }}'
                                   name='description' value='{{ transaction['name'] }}'>
                            <button class='description-edit-submit primary' type='submit'>Save</button>
                            <button class='description-edit-cancel' type='submit'>Cancel</button>
                        </td>
                        <td>{{ transaction['category'] }}</td>
                        <td class='include-in-budget'><input type='checkbox' class='toggle-budget'
                                                             id='{{ transaction['transaction_id'] }}'
                                {% if transaction['budget'] == 'true' %} checked {% endif %}></td>
                    </tr>
                {% endif %}
            {% endfor %}
            </tbody>
        </table>
        <table class='sortable'>
            <thead>
            <tr>
                <th class='transaction-date' data-sort='date'></th>
                <th class='transaction-amount' data-sort='amount'></th>
                <th data-sort='name'></th>
                <th data-sort='name'></th>
                <th class='include-in-budget'></th>
            </tr>
            </thead>
            <tbody>
            {% for transaction in transactions %}
                {% if transaction['amount'] > 0 and transaction['category_id'] != '16000000' and transaction['pending'] == 0 %}
                    <tr>
                        <td class='transaction-date'>{{ transaction['date'] }}</td>
                        <td class='transaction-amount'>${{ transaction['amount'] }}</td>
                        <td class='description-edit-icon'
                            id='{{ transaction['transaction_id'] }}'>{{ transaction['name'] }}
                            <!-- <i class='fas fa-edit' id='edit-icon'></i> -->
                            <span class='icon-link'></span>
                        </td>
                        <td class='description-edit'>
                            <label for='{{ transaction['transaction_id'] }}' id='description-edit-label'>Edit
                                Description</label>
                            <input type='text' class='description-edit-input' id='{{ transaction['transaction_id'] }}'
                                   name='description' value='{{ transaction['name'] }}'>
                            <button class='description-edit-submit primary' type='submit'>Save</button>
                            <button class='description-edit-cancel' type='submit'>Cancel</button>
                        </td>
                        <td>{{ transaction['category'] }}</td>
                        <td class='include-in-budget'><input type='checkbox' class='toggle-budget'
                                                             id='{{ transaction['transaction_id'] }}'
                                {% if transaction['budget'] == 'true' %} checked {% endif %}></td>
                    </tr>
                {% endif %}
            {% endfor %}
            </tbody>
        </table>
    </div>
    <form action='{{ url_for('dashboard.import_csv') }}' method=post enctype=multipart/form-data>
      <input type=file name=file>
      <input type=submit value=Upload>
    </form>
    <script type='text/javascript' src='{{ url_for('static', filename='js/sort-table.js') }}'></script>
    <script type='text/javascript' src='{{ url_for('static', filename='js/edit-description.js') }}'></script>
    <script type='text/javascript' src='{{ url_for('static', filename='js/update-accounts.js') }}'></script>
    <script type='text/javascript' src='{{ url_for('static', filename='js/toggle-budget.js') }}'></script>

{% endblock %}